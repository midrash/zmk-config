/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */
#pragma once

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/mouse.h>

#define BASE 0
#define ARROW 1
#define NUMBER 2
#define FUNCTION 3
#define MOUSE 4

#define U_MOUSE_MOVE_MAX 1250
#define U_MOUSE_MOVE_EXPONENT 1
#define U_MOUSE_MOVE_TIME 1500
#define U_MOUSE_MOVE_DELAY 0
#define U_MOUSE_SCROLL_MAX 100
#define U_MOUSE_SCROLL_EXPONENT 1
#define U_MOUSE_SCROLL_TIME 5000
#define U_MOUSE_SCROLL_DELAY 0

#undef MOVE_UP
#undef MOVE_DOWN
#undef MOVE_LEFT
#undef MOVE_RIGHT
#undef SCROLL_UP
#undef SCROLL_DOWN
#undef SCROLL_LEFT
#undef SCROLL_RIGHT
#define MOVE_UP MOVE_VERT(-U_MOUSE_MOVE_MAX)
#define MOVE_DOWN MOVE_VERT(U_MOUSE_MOVE_MAX)
#define MOVE_LEFT MOVE_HOR(-U_MOUSE_MOVE_MAX)
#define MOVE_RIGHT MOVE_HOR(U_MOUSE_MOVE_MAX)
#define SCROLL_UP SCROLL_VERT(U_MOUSE_SCROLL_MAX)
#define SCROLL_DOWN SCROLL_VERT(-U_MOUSE_SCROLL_MAX)
#define SCROLL_LEFT SCROLL_HOR(-U_MOUSE_SCROLL_MAX)
#define SCROLL_RIGHT SCROLL_HOR(U_MOUSE_SCROLL_MAX)

#define U_MS_D &mmv MOVE_DOWN
#define U_MS_L &mmv MOVE_LEFT
#define U_MS_R &mmv MOVE_RIGHT
#define U_MS_U &mmv MOVE_UP
#define U_WH_D &mwh SCROLL_DOWN
#define U_WH_L &mwh SCROLL_LEFT
#define U_WH_R &mwh SCROLL_RIGHT
#define U_WH_U &mwh SCROLL_UP

/ {
behaviors {
        hm: homerow_mods {
                compatible = "zmk,behavior-hold-tap";
                label = "HOMEROW_MODS";
                #binding-cells = <2>;
                tapping-term-ms = <200>;
                quick_tap_ms = <0>;
                flavor = "tap-preferred";
                bindings = <&kp>, <&kp>;
        };
};
        keymap {
                compatible = "zmk,keymap";

                Base_layer {
// -----------------------------------------------------------------------------------------
// |     |  Q  |  W  |  E  |  R  |  T  |   |  Y  |  U   |  I  |  O  |  P  |     |
// |     |  A  |  S  |  D  |  F  |  G  |   |  H  |  J   |  K  |  L  |  ;  |     |
// |     |  Z  |  X  |  C  |  V  |  B  |   |  N  |  M   |  ,  |  .  |  /  |     |
//        | ESC | SPC(LOW)  | TAB(MUS)  |   |  ENT(FUN)  | BCK(RSE)  | DEL |
                        bindings = <
&none &kp Q &kp W &kp E &kp R &kp T &kp Y &kp U &kp I &kp O &kp P &none 
&none &hm LGUI A &hm LALT S &hm LCTRL D &hm LSHFT F &kp G &kp H &hm LSHFT J &hm LCTRL K &hm LALT L &hm LGUI SEMICOLON &none 
&none &kp Z &kp X &kp C &kp V &kp B &kp N &kp M &kp COMMA &kp PERIOD &kp SLASH &none 
&kp ESCAPE &lt ARROW SPACE &lt MOUSE TAB &lt FUNCTION RETURN &lt NUMBER BACKSPACE &kp DEL 

                        >;
                };
                ARROW_layer {
// -----------------------------------------------------------------------------------------
// |     | MUT | VL- | VL+ |HANYN| CAP |   |     | HOME|  UP |PG_UP|     |     |
// |     | GUI | ALT | CTL | SFT | SPC |   |hanja| LFT | DWN | RGT |  '  |     |
// |     |CTL_Z|CTL_X|CTL_C|CTL_V|CTL_Y|   |     | END | IST |PG_DN|     |     |
//                   |     | TRN |     |   | ENT | BCK | DEL |
                        bindings = <
&none &kp K_MUTE2 &kp K_VOLUME_DOWN2 &kp K_VOLUME_UP2 &kp LANGUAGE_1 &kp CAPSLOCK &none &kp HOME &kp UP &kp PG_UP &none &none 
&none &kp LEFT_GUI &kp LEFT_ALT &kp LEFT_CONTROL &kp LEFT_SHIFT &kp SPACE &none &kp LEFT &kp DOWN &kp RIGHT_ARROW &kp SINGLE_QUOTE &none 
&none &kp LC(Z) &kp LC(X) &kp LC(C) &kp LC(V) &kp LC(Y) &none &kp END &kp INSERT &kp PG_DN &none &none
&none &trans &none &kp RETURN &kp BACKSPACE &kp DEL 
                        >;
                };

                NUMBER_layer {
// -----------------------------------------------------------------------------------------
// |     |  [  |  7  |  8  |  9  |  ]  |   |     |     |     |     |     |     |
// |     |  -  |  4  |  5  |  6  |  =  |   | SPC | SFT | CTL | ALT | GUI |     |
// |     |  `  |  1  |  2  |  3  |  \  |   |     |     |     |     |     |     |
//                   |  .  |  0  |     |   |     | TRN |     |
                        bindings = <
&none &kp LEFT_BRACKET &kp NUMBER_7 &kp NUMBER_8 &kp NUMBER_9 &kp RIGHT_BRACKET &none &none &none &none &none &none 
&none &kp MINUS &kp NUMBER_4 &kp NUMBER_5 &kp NUMBER_6 &kp EQUAL &kp SPACE &kp LEFT_SHIFT &kp LEFT_CONTROL &kp LEFT_ALT &kp LEFT_GUI &none 
&none &kp GRAVE &kp NUMBER_1 &kp NUMBER_2 &kp NUMBER_3 &kp BACKSLASH &none &none &none &none &none &none 
&kp DOT &kp NUMBER_0 &none &none &trans &none 

                        >;
                };

                FUNCTION_layer {
// -----------------------------------------------------------------------------------------
// |     | F10 |  F7 |  F8 |  F9 |SC_LK|   |     |     |     |     |     |     |
// |     | F11 |  F4 |  F5 |  F6 |PRINT|   |     | SFT | CTL | ALT | GUI |     |
// |     | F12 |  F1 |  F2 |  F3 |PAUSE|   |     |     |     |     |     |     |
//                   |     |     |     |   | TRN |     |     |
                        bindings = <
&none &kp F10 &kp F7 &kp F8 &kp F9 &kp SCROLLLOCK &none &none &none &none &none &none 
&none &kp F11 &kp F4 &kp F5 &kp F6 &kp PRINTSCREEN &none &kp LEFT_SHIFT &kp LEFT_CONTROL &kp LEFT_ALT &kp LEFT_GUI &none 
&none &kp F12 &kp F1 &kp F2 &kp F3 &kp PAUSE_BREAK &none &none &none &none &none &none 
&none &none &none &trans &none &none 
                        >;
                };

                MOUSE_layer {
// -----------------------------------------------------------------------------------------
// |     |     |     |     |     | CLR |   |     | MSU | M_U | MSD |     |     |
// |     | BT5 | BT4 | BT3 | BT2 | BT1 |   | MB5 | M_L | M_D | M_R | MB4 |     |
// |     |     |     |     |     |     |   |     | MSL | MB3 | MSR |     |     |
//                   |     |     | TRN |   | MB1 | MB2 |     |
                        bindings = <
&none &none &none &none &none &bt BT_CLR &none &mwh SCROLL_UP &mmv MOVE_UP &mwh SCROLL_DOWN &none &none 
&none &bt BT_SEL 5 &bt BT_SEL 4 &bt BT_SEL 3 &bt BT_SEL 2 &bt BT_SEL 1 &mkp MB5 &mmv MOVE_LEFT &mmv MOVE_DOWN &mmv MOVE_RIGHT &mkp MB4 &none 
&none &none &none &none &none &none &none &mwh SCROLL_LEFT &mkp MB3 &mwh SCROLL_RIGHT &none &none 
&none &none &trans &mkp MB1 &mkp MB2 &none 
                        >;
                };
        };
};
